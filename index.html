<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Elite Gold Casino</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: #050505; color: gold; font-family: 'Arial', sans-serif; text-align: center; margin: 0; padding: 10px; overflow: hidden; }
        .casino-frame { border: 5px solid #d4af37; border-radius: 25px; padding: 20px; background: radial-gradient(circle, #1a1a1a 0%, #000 100%); box-shadow: 0 0 30px #d4af37; height: 90vh; display: flex; flex-direction: column; justify-content: space-around; }
        .slot-machine { display: flex; justify-content: center; gap: 10px; perspective: 1000px; }
        .reel { background: white; color: black; width: 80px; height: 120px; line-height: 120px; font-size: 60px; border-radius: 12px; border: 4px solid #444; box-shadow: inset 0 0 15px #000; }
        .spinning { animation: blurAnim 0.1s infinite; }
        @keyframes blurAnim { 0% { filter: blur(2px); transform: translateY(-2px); } 100% { filter: blur(5px); transform: translateY(2px); } }
        input { width: 70%; padding: 15px; border-radius: 12px; border: 2px solid gold; background: #111; color: white; font-size: 24px; font-weight: bold; text-align: center; }
        .btn-spin { background: linear-gradient(180deg, #ffd700 0%, #b8860b 100%); color: black; border: none; padding: 20px; width: 90%; border-radius: 50px; font-size: 26px; font-weight: bold; cursor: pointer; text-shadow: 1px 1px 2px rgba(255,255,255,0.5); }
        #msg { font-size: 20px; font-weight: bold; text-transform: uppercase; min-height: 30px; text-shadow: 0 0 5px gold; }
    </style>
</head>
<body>
    <div class="casino-frame">
        <h1 style="margin:0; font-size: 28px;">üëë ELITE SLOTS üëë</h1>
        <div class="slot-machine">
            <div id="r1" class="reel">üíé</div>
            <div id="r2" class="reel">üíé</div>
            <div id="r3" class="reel">üíé</div>
        </div>
        <div>
            <p style="margin:5px;">APUESTA M√çNIMA: 10 Bs</p>
            <input type="number" id="bet" value="10" min="10">
        </div>
        <button class="btn-spin" onclick="runGame()">JUGAR / GIRAR</button>
        <div id="msg">¬°BUENA SUERTE!</div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        
        // Elementos de audio (Reemplazables con links directos de tus archivos si prefieres)
        const audioSpin = new Audio('https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3');
        const audioWin = new Audio('https://www.soundjay.com/human/sounds/applause-01.mp3');
        const audioError = new Audio('https://www.soundjay.com/button/sounds/button-10.mp3');

        async function runGame() {
            const betMonto = document.getElementById('bet').value;
            const msg = document.getElementById('msg');
            const reels = [document.getElementById('r1'), document.getElementById('r2'), document.getElementById('r3')];

            if (betMonto < 10) return alert("Apuesta m√≠nima 10 Bs");

            // INICIO DE ANIMACI√ìN Y SONIDO
            msg.innerText = "PROCESANDO...";
            msg.style.color = "gold";
            audioSpin.play();
            reels.forEach(r => r.classList.add('spinning'));

            // COMUNICACI√ìN SILENCIOSA CON EL BOT (No cierra la ventana)
            // IMPORTANTE: Esto le dice al bot que reste el saldo.
            tg.sendData(JSON.stringify({monto: betMonto, action: 'spin'}));

            // SIMULACI√ìN DE RESULTADO (1.8 segundos para dar emoci√≥n)
            setTimeout(() => {
                reels.forEach(r => r.classList.remove('spinning'));
                const icons = ["üçí", "üçã", "üîî", "üíé", "7Ô∏è‚É£", "‚≠ê"];
                const results = [
                    icons[Math.floor(Math.random() * icons.length)],
                    icons[Math.floor(Math.random() * icons.length)],
                    icons[Math.floor(Math.random() * icons.length)]
                ];

                reels[0].innerText = results[0];
                reels[1].innerText = results[1];
                reels[2].innerText = results[2];

                if (results[0] === results[1] && results[1] === results[2]) {
                    msg.innerText = "¬°PREMIO MAYOR! üéâ";
                    msg.style.color = "#00ff00";
                    audioWin.play();
                } else {
                    msg.innerText = "PERDISTE " + betMonto + " Bs";
                    msg.style.color = "#ff4444";
                }
            }, 1800);
        }
    </script>
</body>
            </html>
                                                                      
